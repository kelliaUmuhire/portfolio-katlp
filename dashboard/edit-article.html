<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Edit Article</title>
    <link rel="stylesheet" href="../styles/home.css" />
    <link rel="stylesheet" href="../styles/index.css" />
    <link rel="stylesheet" href="../styles/dashboard.css" />
    <link
      href="https://cdn.quilljs.com/1.3.6/quill.snow.css"
      rel="stylesheet"
    />
    <script src="https://cdn.jsdelivr.net/npm/feather-icons/dist/feather.min.js"></script>
    <script src="../js/main.js"></script>
    <script src="../js/services.js"></script>
  </head>
  <body>
    <div class="nav">
      <input type="checkbox" id="nav-check" />
      <div class="nav-header">
        <div class="nav-title">Kellia Umuhire</div>
      </div>
      <div class="nav-btn">
        <label for="nav-check">
          <span></span>
          <span></span>
          <span></span>
        </label>
      </div>
      <div class="nav-links">
        <a href="./index.html" id="home_link">Home</a>
        <a href="../pages/profile.html">Profile</a>
        <a href="../index.html">Logout</a>
      </div>
    </div>

    <div class="dash-nav">
      <div
        class="add-article add-1"
        style="border-bottom: 1px solid #d458ab; color: #d458ab"
      >
        <ion-icon name="document"></ion-icon>
        <div style="margin-left: 4px">
          <a href="./index.html">Articles</a>
        </div>
      </div>
      <div class="add-article">
        <ion-icon
          name="add"
          style="margin: 1px 0px 0px 3px; cursor: pointer"
        ></ion-icon>
        <div><a href="./new-article.html">New Article</a></div>
      </div>
      <div class="add-article">
        <ion-icon name="people"></ion-icon>
        <div style="margin-left: 4px">
          <a href="./users.html">Users</a>
        </div>
      </div>
      <div class="add-article">
        <ion-icon name="stats-chart"></ion-icon>
        <div style="margin-left: 4px">
          <a href="./stats.html">Stats</a>
        </div>
      </div>
    </div>

    <div class="new-article">
      <div class="a-h1" style="text-align: left">EDIT ARTICLE</div>
      <div class="a-form" id="a_form">
        <div class="input-group">
          <div>NAME</div>
          <input type="text" name="a_title" />
        </div>
        <div class="error-msg" id="a_title_error"></div>
        <div class="input-group" style="display: flex">
          <label class="choose-pic">
            <input type="file" name="custom_img" style="display: none" />
            CHOOSE PHOTO
          </label>
          <div style="margin-left: 20px; margin-top: 8px" id="photoName"></div>
        </div>
        <div class="editor">
          <textarea placeholder="Type something.." name="a_content"></textarea>
          <div class="error-msg" id="a_content_error"></div>
        </div>

        <div>
          <input type="checkbox" name="isPublished" />
          Publish
        </div>

        <button class="c-blog-btn" onclick="updateBlog()">UPDATE</button>
      </div>
    </div>

    <div class="footer">
      <div>made by kel.</div>
      <div class="footer-f">
        <a href="../pages/posts.html">posts</a>
        <a href="../index.html#newsletter">newsletter</a>
      </div>
    </div>

    <script src="https://unpkg.com/ionicons@5.0.0/dist/ionicons.js"></script>
    <script src="https://unpkg.com/axios/dist/axios.min.js"></script>
    <script>
      document
        .querySelector("input[name=custom_img]")
        .addEventListener("change", (e) => {
          document.getElementById("photoName").innerHTML =
            e.target.files[0].name;
          document.getElementById("photoName").style.color = "#ededed";
        });

      getArticle(true).then((res) => {
        document.querySelector("input[name=a_title]").value = res.data.title;
        document.querySelector("textarea[name=a_content]").value =
          res.data.content;
        document.getElementById("photoName").innerHTML =
          res.data.picture.split("/")[4];
        document.querySelector("input[name=isPublished]").checked =
          res.data.published;
      });
    </script>
  </body>
</html>
